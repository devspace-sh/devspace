---
title: Build Images with Docker
sidebar_label: docker
---

## `docker`
If nothing is specified, DevSpace always tries to build the image using `docker` as build tool.


### `useBuildKit`
The `useBuildKit` option expects a boolean which allows to enable buildkit builds (i.e. `DOCKER_BUILDKIT=1`).

#### Default Value For `useBuildKit`
```yaml
useBuildKit: false
```

#### Example: Docker useBuildKit
```yaml
images:
  backend:
    image: john/appbackend
    docker:
      useBuildKit: true
```

### `useCli`
If `useCli` is true, devspace will use the local docker installation for building and invoke `docker build`. This option is implicitly true, if `useBuildKit` or `args` is specified.

### `args`
The `args` option expects an array of strings to be passed as arguments and flags to Docker.

:::warning
When specifying `args`, DevSpace will invoke your installed Docker CLI via a command-line call instead of using the built-in Docker client. This has the negative effects that:
- The kaniko fallback will not be used anymore.
- You need to make sure that everyone who is using this configuration has the same version (or a compatible one) of Docker installed.
:::

#### Example: Docker args
```yaml
images:
  backend:
    image: john/appbackend
    docker:
      args:
      - "--no-cache"
      - "--compress"
```


### `disableFallback`
When using `docker` as build tool, DevSpace checks if Docker is installed and running. If Docker is not installed or not running, DevSpace will use kaniko as fallback to build the image unless the option `disableFallback` is set to `false`.

#### Default Value For `disableFallback`
```yaml
disableFallback: false
```

#### Example: Disabling kaniko Fallback
```yaml
images:
  backend:
    image: john/appbackend
  frontend:
    image: john/appfrontend
    docker:
      disableFallback: true
```
**Explanation:**  
- The first image `backend` would be built using Docker and if Docker is not available, the image would be built using kaniko as a fallback.
- The second image `frontend` would be built using Docker and if Docker is not available, DevSpace would exit with a fatal error instead of using the kaniko fallback.


### `preferMinikube`
DevSpace preferably uses the Docker daemon running in the virtual machine that belongs to your local Kubernetes cluster instead of your regular Docker daemon. This has the advantage that images do not need to be pushed to a registry because Kubernetes can simply use the images available in the Docker daemon belonging to the kubelet of the local cluster. Using this method is only possible when your current kube-context points to a local Kubernetes cluster and is named `minikube`, `docker-desktop` or `docker-for-desktop`.

#### Default Value For `preferMinikube`
```yaml
preferMinikube: true
```

#### Example: Building Images in Minikube
```yaml
images:
  backend:
    image: john/appbackend
    docker:
      preferMinikube: true
  frontend:
    image: john/appfrontend
    docker:
      preferMinikube: false
```
**Explanation:**  
- The first image `backend` would be preferably built with Minikube's Docker daemon and the image would **not** be pushed to a registry.
- The second image `frontend` would **not** be built with the Docker daemon of Minikube and it would be pushed to a registry after building and tagging the image using Docker (or kaniko as fallback).
